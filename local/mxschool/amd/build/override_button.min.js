define(["jquery","core/ajax","core/notification"],function(a,b,c){function d(c){var d=a(c.target),e=d.attr("name"),f=a(".mx-override-text"+e),g=a(".mx-changeable-text"+e),h="Approved"==g.text()?"Denied":"Approved",i=g.text(),j=f.text();if(""==j&&(j="Not Overridden"),""==f.text())f.text("Under Review"),d.text("Override");else if("Under Review"==f.text())f.text("Overridden"),d.text("Undo Override"),g.text(h),"Approved"==h?g.css("color","green"):"Denied"==h&&g.css("color","red");else{if("Overridden"!=f.text())throw"Unrecognized override text: "+f.text();f.text(""),d.text("Review"),g.text(h),"Approved"==h?g.css("color","green"):"Denied"==h&&g.css("color","red")}b.call([{methodname:"local_mxschool_update_healthform_override_status",args:{userid:e,status:i,override_status:j}}])}return function(b){var c=a(".mx-override-button"+b),e=a(".mx-override-text"+b),f=c.attr("value"),g=a(".mx-changeable-text"+b);if("Not Overridden"==f)e.text(""),c.text("Review");else if("Under Review"==f)e.text("Under Review"),c.text("Override");else{if("Overridden"!=f)throw"Unrecognized override_status value in database: "+f;e.text("Overridden"),c.text("Undo Override")}if("Approved"==g.text())g.css("color","green");else{if("Denied"!=g.text())throw"Should not be overriding unsubmitted form of userid: "+b;g.css("color","red")}c.click(d)}});