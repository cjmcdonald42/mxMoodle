define(["jquery","core/ajax","core/str","core/notification"],function(a,b,c,d){function e(c){var e=a(c.target),f=e.attr("value"),i=e.attr("name"),j=a(".mx-alternating-text"+i+f),k=(j.attr("name"),j.attr("value")),l=h(),m=0;if(j.text()==l[k+"_alternating_text_"+i+"_0_text"])j.text(l[k+"_alternating_text_"+i+"_1_text"]),j.css("color",l[k+"_alternating_text_"+i+"_1_color"]),e.text(l[k+"_alternating_button_"+i+"_1_text"]),e.css("background-color",l[k+"_alternating_button_"+i+"_1_color"]),e.css("border-color",l[k+"_alternating_button_"+i+"_1_color"]),g(f,k);else if(j.text()==l[k+"_alternating_text_"+i+"_1_text"])m=1,j.text(l[k+"_alternating_text_"+i+"_2_text"]),j.css("color",l[k+"_alternating_text_"+i+"_2_color"]),e.text(l[k+"_alternating_button_"+i+"_2_text"]),e.css("background-color",l[k+"_alternating_button_"+i+"_2_color"]),e.css("border-color",l[k+"_alternating_button_"+i+"_2_color"]),g(f,k);else{if(j.text()!=l[k+"_alternating_text_"+i+"_2_text"])throw"Unrecognized permission text: "+j.text();m=2,j.text(l[k+"_alternating_text_"+i+"_0_text"]),j.css("color",l[k+"_alternating_text_"+i+"_0_color"]),e.text(l[k+"_alternating_button_"+i+"_0_text"]),e.css("background-color",l[k+"_alternating_button_"+i+"_0_color"]),e.css("border-color",l[k+"_alternating_button_"+i+"_0_color"]),g(f,k)}var n=b.call([{methodname:"local_mxschool_do_alternating_button_action",args:{id:f,name:i,value:m,"package":k}}]);n[0].done().fail(d.exception)}function f(b){var c=h();return a(".mx-alternating-textsports"+b).text()!=c.deans_permission_alternating_text_sports_1_text&&a(".mx-alternating-textstudyhours"+b).text()!=c.deans_permission_alternating_text_studyhours_1_text&&a(".mx-alternating-textclass"+b).text()!=c.deans_permission_alternating_text_class_1_text}function g(b,c){var d=h();"deans_permission"==c&&(f(b)&&a(".mx-alternating-buttondeans"+b).text()==d.deans_permission_alternating_button_deans_1_text?(a(".mx-alternating-buttondeans"+b).css("background-color",d.deans_permission_alternating_button_deans_1_color_ready),a(".mx-alternating-buttondeans"+b).css("border-color",d.deans_permission_alternating_button_deans_1_color_ready)):a(".mx-alternating-buttondeans"+b).text()==d.deans_permission_alternating_button_deans_1_text&&(a(".mx-alternating-buttondeans"+b).css("background-color",d.deans_permission_alternating_button_deans_1_color_waiting),a(".mx-alternating-buttondeans"+b).css("border-color",d.deans_permission_alternating_button_deans_1_color_waiting)))}function h(){var a={deans_permission_alternating_text_sports_0_text:"",deans_permission_alternating_text_sports_0_color:"white",deans_permission_alternating_button_sports_0_text:"Request Review",deans_permission_alternating_button_sports_0_color:"steelblue",deans_permission_alternating_text_sports_1_text:"Under Review",deans_permission_alternating_text_sports_1_color:"dimgray",deans_permission_alternating_button_sports_1_text:"Approve",deans_permission_alternating_button_sports_1_color:"mediumseagreen",deans_permission_alternating_text_sports_2_text:"Approved",deans_permission_alternating_text_sports_2_color:"mediumseagreen",deans_permission_alternating_button_sports_2_text:"Undo",deans_permission_alternating_button_sports_2_color:"dimgray",deans_permission_alternating_text_studyhours_0_text:"",deans_permission_alternating_text_studyhours_0_color:"white",deans_permission_alternating_button_studyhours_0_text:"Request Review",deans_permission_alternating_button_studyhours_0_color:"steelblue",deans_permission_alternating_text_studyhours_1_text:"Under Review",deans_permission_alternating_text_studyhours_1_color:"dimgray",deans_permission_alternating_button_studyhours_1_text:"Approve",deans_permission_alternating_button_studyhours_1_color:"mediumseagreen",deans_permission_alternating_text_studyhours_2_text:"Approved",deans_permission_alternating_text_studyhours_2_color:"mediumseagreen",deans_permission_alternating_button_studyhours_2_text:"Undo",deans_permission_alternating_button_studyhours_2_color:"dimgray",deans_permission_alternating_text_class_0_text:"",deans_permission_alternating_text_class_0_color:"white",deans_permission_alternating_button_class_0_text:"Request Review",deans_permission_alternating_button_class_0_color:"steelblue",deans_permission_alternating_text_class_1_text:"Under Review",deans_permission_alternating_text_class_1_color:"dimgray",deans_permission_alternating_button_class_1_text:"Approve",deans_permission_alternating_button_class_1_color:"mediumseagreen",deans_permission_alternating_text_class_2_text:"Approved",deans_permission_alternating_text_class_2_color:"mediumseagreen",deans_permission_alternating_button_class_2_text:"Undo",deans_permission_alternating_button_class_2_color:"dimgray",deans_permission_alternating_text_deans_0_text:"",deans_permission_alternating_text_deans_0_color:"white",deans_permission_alternating_button_deans_0_text:"Review Requests",deans_permission_alternating_button_deans_0_color:"steelblue",deans_permission_alternating_text_deans_1_text:"Awaiting Approvals",deans_permission_alternating_text_deans_1_color:"dimgray",deans_permission_alternating_button_deans_1_text:"Approve",deans_permission_alternating_button_deans_1_color_waiting:"indianred",deans_permission_alternating_button_deans_1_color_ready:"mediumseagreen",deans_permission_alternating_text_deans_2_text:"Form Approved",deans_permission_alternating_text_deans_2_color:"mediumseagreen",deans_permission_alternating_button_deans_2_text:"Undo",deans_permission_alternating_button_deans_2_color:"dimgray"};return a}return function(b,c,d,f,i){var j=a(".mx-alternating-button"+d+b),k=a(".mx-alternating-text"+d+b),l=h();if(0==f)k.text(l[i+"_alternating_text_"+d+"_0_text"]),k.css("color",l[i+"_alternating_text_"+d+"_0_color"]),j.text(l[i+"_alternating_button_"+d+"_0_text"]),j.css("background-color",l[i+"_alternating_button_"+d+"_0_color"]),j.css("border-color",l[i+"_alternating_button_"+d+"_0_color"]),g(b,i);else if(1==f)k.text(l[i+"_alternating_text_"+d+"_1_text"]),k.css("color",l[i+"_alternating_text_"+d+"_1_color"]),j.text(l[i+"_alternating_button_"+d+"_1_text"]),j.css("background-color",l[i+"_alternating_button_"+d+"_1_color"]),j.css("border-color",l[i+"_alternating_button_"+d+"_1_color"]),g(b,i);else{if(2!=f)throw"Unrecognized permission value in database: "+f+" for "+d;k.text(l[i+"_alternating_text_"+d+"_2_text"]),k.css("color",l[i+"_alternating_text_"+d+"_2_color"]),j.text(l[i+"_alternating_button_"+d+"_2_text"]),j.css("background-color",l[i+"_alternating_button_"+d+"_2_color"]),j.css("border-color",l[i+"_alternating_button_"+d+"_2_color"]),g(b,i)}j.click(e)}});